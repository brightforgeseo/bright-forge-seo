---
import ArticleTemplate from '../../components/ArticleTemplate.astro';
import { marked } from 'marked';
import raw from '../../articles/The Answer Engine Revolution/The Answer Engine Revolution_ A Strategic Guide to Dominance in the Era of AI Overviews, AI Mode, and LLM Search.md?raw';

import { Slugger } from 'marked';

const slugger = new Slugger();

// Create a table of contents from H2 and H3 headings in markdown
const tableOfContents = [];
cleanedRaw.split('\n').forEach((line) => {
  if (/^#{2,3}\s+/.test(line)) {
    const level = line.startsWith('###') ? 3 : 2;
    const title = line.replace(/^#+\s+/, '').trim();
    const id = slugger.slug(title);
    tableOfContents.push({ id, title, level });
  }
});

// Remove top-level H1 to avoid duplicate title (already in hero)
const cleanedRaw = raw.replace(/^#\s+.*\n/, '');
const content = marked.parse(cleanedRaw);

const title = 'The Answer Engine Revolution: A Strategic Guide to Dominance in the Era of AI Overviews, AI Mode, and LLM Search';
const excerpt = 'Comprehensive guide to thriving in the new AI-driven search ecosystemâ€”learn strategies for entity authority, brand building, and generative engine optimisation.';
const author = {
  name: 'Ben Lowe',
  bio: 'SEO and Digital Marketing Expert',
  linkedin: 'https://www.linkedin.com/in/ben-lowe/'
};
const publishDate = '2025-06-19';
const readTime = '20 min';
const category = 'SEO';
const tags = ['SEO', 'AI Search', 'Answer Engines', 'AI Overviews', 'Digital Marketing'];
---

<!--
  Using ArticleTemplate with Markdown slot to avoid giant template literal escaping issues.
  Full Markdown source is rendered via <Markdown> component, ensuring the entire article appears error-free.
-->

<ArticleTemplate
  title={title}
  excerpt={excerpt}
  author={author}
  publishDate={publishDate}
  readTime={readTime}
  category={category}
  tags={tags}
  content={content}
  tableOfContents={tableOfContents}
/>
