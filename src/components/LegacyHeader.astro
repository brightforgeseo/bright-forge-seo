---
// LegacyHeader.astro â€“ Professional mega-menu for SEO agency
import "../styles/legacy.css";
---

<!-- Top Contact Bar -->
<div class="top-bar-professional">
  <div class="top-bar-container">
    <div class="contact-info-professional">
      <a href="mailto:seo@brightforgeseo.com" class="contact-link">
        <i class="fas fa-envelope"></i>
        <span>seo@brightforgeseo.com</span>
      </a>
      <a href="tel:+639696206182" class="contact-link">
        <i class="fas fa-phone"></i>
        <span>(+63) 969 620 6182</span>
      </a>
    </div>
    <div class="social-links-professional">
      <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
      <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
      <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
    </div>
  </div>
</div>

<!-- Main Navigation with Professional Mega Menu -->
<nav class="navbar-professional">
  <div class="nav-container">
    <!-- Logo -->
    <div class="nav-logo">
      <a href="/">
        <img src="/images/logo-bright-forge.png" alt="Bright Forge SEO" width="180" height="50">
      </a>
    </div>

    <!-- Desktop Navigation -->
    <ul class="nav-menu-professional">
      <li class="nav-item-professional">
        <a href="/" class="nav-link-professional">
          <span>Home</span>
        </a>
      </li>
      
      <li class="nav-item-professional has-dropdown">
        <a href="#" class="nav-link-professional">
          <span>SEO Services</span>
          <i class="fas fa-chevron-down nav-arrow"></i>
        </a>
        <div class="mega-menu-professional">
          <div class="mega-menu-container">
            <div class="mega-menu-content">
              <!-- Core Services Column -->
              <div class="mega-column">
                <h3 class="column-title">Core SEO Services</h3>
                <div class="service-links">
                  <a href="/philippines-seo-services" class="service-link">
                    <div class="service-info">
                      <strong>Philippines SEO Services</strong>
                      <span>Complete SEO solutions for Philippine businesses</span>
                    </div>
                  </a>
                  <a href="/technical-seo-services-philippines" class="service-link">
                    <div class="service-info">
                      <strong>Technical SEO</strong>
                      <span>Fix technical issues and improve site performance</span>
                    </div>
                  </a>
                  <a href="/on-page-seo-services-philippines" class="service-link">
                    <div class="service-info">
                      <strong>On-Page SEO</strong>
                      <span>Optimize content and page elements</span>
                    </div>
                  </a>
                  <a href="/content-seo-services-philippines" class="service-link">
                    <div class="service-info">
                      <strong>Content SEO</strong>
                      <span>Strategic content creation and optimization</span>
                    </div>
                  </a>
                </div>
              </div>

              <!-- Specialized Services Column -->
              <div class="mega-column">
                <h3 class="column-title">Specialized Services</h3>
                <div class="service-links">
                  <a href="/backlink-seo-services-philippines" class="service-link">
                    <div class="service-info">
                      <strong>Link Building</strong>
                      <span>High-quality backlink acquisition</span>
                    </div>
                  </a>
                  <a href="/white-label-seo-services-philippines" class="service-link">
                    <div class="service-info">
                      <strong>White Label SEO</strong>
                      <span>Partner with us for your client projects</span>
                    </div>
                  </a>
                  <a href="/seo-audit-services" class="service-link">
                    <div class="service-info">
                      <strong>SEO Audits</strong>
                      <span>Comprehensive website analysis</span>
                    </div>
                  </a>
                  <a href="/keyword-research-services" class="service-link">
                    <div class="service-info">
                      <strong>Keyword Research</strong>
                      <span>Strategic keyword planning and analysis</span>
                    </div>
                  </a>
                </div>
              </div>

              <!-- Development Services Column -->
              <div class="mega-column">
                <h3 class="column-title">Development & Migration</h3>
                <div class="service-links">
                  <a href="/astro-seo-website-development" class="service-link">
                    <div class="service-info">
                      <strong>Astro Website Development</strong>
                      <span>Fast, SEO-optimized websites</span>
                    </div>
                  </a>
                  <a href="/website-migration-services" class="service-link">
                    <div class="service-info">
                      <strong>Website Migration</strong>
                      <span>Safe and SEO-friendly site moves</span>
                    </div>
                  </a>
                </div>
                
                <div class="mega-highlight">
                  <h4>Ready to Get Started?</h4>
                  <p>Get a free SEO consultation and discover how we can help your business grow.</p>
                  <a href="/contact" class="cta-button-mega">Free Consultation</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </li>

      <li class="nav-item-professional">
        <a href="/case-studies" class="nav-link-professional">
          <span>Case Studies</span>
        </a>
      </li>
      
      <li class="nav-item-professional">
        <a href="/blog" class="nav-link-professional">
          <span>Blog</span>
        </a>
      </li>

      <li class="nav-item-professional has-dropdown">
        <a href="#" class="nav-link-professional">
          <span>Company</span>
          <i class="fas fa-chevron-down nav-arrow"></i>
        </a>
        <div class="dropdown-professional">
          <div class="dropdown-content">
            <a href="/about-us" class="dropdown-link">
              <strong>About Us</strong>
              <span>Learn about our team and mission</span>
            </a>
            <a href="/contact" class="dropdown-link">
              <strong>Contact</strong>
              <span>Get in touch with our team</span>
            </a>
          </div>
        </div>
      </li>
    </ul>

    <a href="/contact" class="cta-button-professional">
      <span>Get Started</span>
    </a>

    <button type="button" class="mobile-menu-btn" aria-label="Toggle mobile menu">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu">
    <div class="mobile-menu-content">
      <a href="/" class="mobile-nav-link">Home</a>
      
      <div class="mobile-dropdown">
              <button class="mobile-dropdown-btn">
        <span>SEO Services</span>
        <i class="fas fa-chevron-down"></i>
      </button>
        <div class="mobile-dropdown-content">
          <a href="/philippines-seo-services" class="mobile-nav-link">Philippines SEO Services</a>
          <a href="/technical-seo-services-philippines" class="mobile-nav-link">Technical SEO</a>
          <a href="/on-page-seo-services-philippines" class="mobile-nav-link">On-Page SEO</a>
          <a href="/content-seo-services-philippines" class="mobile-nav-link">Content SEO</a>
          <a href="/backlink-seo-services-philippines" class="mobile-nav-link">Link Building</a>
          <a href="/white-label-seo-services-philippines" class="mobile-nav-link">White Label SEO</a>
          <a href="/seo-audit-services" class="mobile-nav-link">SEO Audits</a>
          <a href="/keyword-research-services" class="mobile-nav-link">Keyword Research</a>
          <a href="/astro-seo-website-development" class="mobile-nav-link">Astro Development</a>
          <a href="/website-migration-services" class="mobile-nav-link">Website Migration</a>
        </div>
      </div>
      
      <a href="/case-studies" class="mobile-nav-link">Case Studies</a>
      <a href="/blog" class="mobile-nav-link">Blog</a>
      
      <div class="mobile-dropdown">
              <button class="mobile-dropdown-btn">
        <span>Company</span>
        <i class="fas fa-chevron-down"></i>
      </button>
        <div class="mobile-dropdown-content">
          <a href="/about-us" class="mobile-nav-link">About Us</a>
          <a href="/contact" class="mobile-nav-link">Contact</a>
        </div>
      </div>
      
      <a href="/contact" class="mobile-cta">Get Started</a>
    </div>
  </div>
</nav>

<script>
// Ensure DOM is loaded before attaching event handlers
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM loaded, initializing mobile menu');
  
  // Make functions globally available
  window.toggleMobileMenu = function() {
    const mobileMenu = document.querySelector('.mobile-menu');
    const menuBtn = document.querySelector('.mobile-menu-btn');
    
    if (mobileMenu && menuBtn) {
      mobileMenu.classList.toggle('active');
      menuBtn.classList.toggle('active');
      
      // Toggle body scroll
      document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
    }
  };

  window.toggleMobileDropdown = function(button) {
    console.log('toggleMobileDropdown called');
    const dropdown = button.parentElement;
    const content = dropdown.querySelector('.mobile-dropdown-content');
    const icon = button.querySelector('i');
    const isActive = dropdown.classList.contains('active');
    
    console.log('Dropdown element:', dropdown);
    console.log('Content element:', content);
    console.log('Is active:', isActive);
    
    // Close all other dropdowns
    document.querySelectorAll('.mobile-dropdown').forEach(d => {
      if (d !== dropdown) {
        d.classList.remove('active');
        const otherContent = d.querySelector('.mobile-dropdown-content');
        if (otherContent) {
          otherContent.style.maxHeight = null;
        }
      }
    });
    
    // Toggle current dropdown
    dropdown.classList.toggle('active');
    
    // Toggle content height with smooth animation
    if (!isActive) {
      content.style.maxHeight = content.scrollHeight + "px";
      console.log('Opening dropdown, height:', content.scrollHeight);
    } else {
      content.style.maxHeight = null;
      console.log('Closing dropdown');
    }
    
    // Prevent event bubbling
    if (window.event) {
      window.event.stopPropagation();
    }
  };

  // Close mobile menu when clicking outside
  document.addEventListener('click', function(e) {
    const mobileMenu = document.querySelector('.mobile-menu');
    const menuBtn = document.querySelector('.mobile-menu-btn');
    const navbar = document.querySelector('.navbar-professional');
    
    if (navbar && !navbar.contains(e.target) && mobileMenu && mobileMenu.classList.contains('active')) {
      mobileMenu.classList.remove('active');
      menuBtn.classList.remove('active');
      document.body.style.overflow = '';
    }
  });

  // Handle window resize
  window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
      const mobileMenu = document.querySelector('.mobile-menu');
      const menuBtn = document.querySelector('.mobile-menu-btn');
      
      if (mobileMenu && menuBtn) {
        mobileMenu.classList.remove('active');
        menuBtn.classList.remove('active');
        document.body.style.overflow = '';
      }
    }
  });
  
  // Add click handler to mobile menu button
  const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
  if (mobileMenuBtn) {
    mobileMenuBtn.addEventListener('click', function(e) {
      e.preventDefault();
      window.toggleMobileMenu();
    });
  }
  
  // Add click handlers to mobile dropdown buttons
  document.querySelectorAll('.mobile-dropdown-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      window.toggleMobileDropdown(this);
    });
  });
  
  console.log('Mobile menu initialized');
});
</script>

<style>
  /* Mobile Menu Styles */
  body.menu-open {
    overflow: hidden;
    position: fixed;
    width: 100%;
  }

  /* Mobile dropdown styles - ensure they override legacy.css */
  .mobile-dropdown {
    position: relative !important;
  }

  .mobile-dropdown-btn {
    width: 100% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 15px 20px !important;
    background: none !important;
    border: none !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
    color: #333 !important;
    font-size: 16px !important;
    font-weight: 600 !important;
    text-align: left !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
  }

  .mobile-dropdown-btn:hover {
    background: rgba(255, 68, 56, 0.05) !important;
    color: #ff4438 !important;
  }

  .mobile-dropdown-btn i {
    transition: transform 0.3s ease !important;
    color: #ff4438 !important;
    font-size: 14px !important;
  }

  .mobile-dropdown.active .mobile-dropdown-btn i {
    transform: rotate(180deg) !important;
  }

  .mobile-dropdown-content {
    max-height: 0 !important;
    overflow: hidden !important;
    transition: max-height 0.3s ease !important;
    background: #f8f9fa !important;
  }

  .mobile-dropdown.active .mobile-dropdown-content {
    max-height: 1000px !important; /* Increased for more content */
    overflow: visible !important;
  }

  .mobile-dropdown-content .mobile-nav-link {
    padding-left: 40px !important;
    font-size: 15px !important;
    background: #f8f9fa !important;
    display: block !important;
  }

  .mobile-dropdown-content .mobile-nav-link:hover {
    background: rgba(255, 68, 56, 0.05) !important;
  }

  /* Hide mobile menu button on desktop - highest priority */
  .navbar-professional .mobile-menu-btn {
    display: none !important;
    visibility: hidden !important;
  }

  /* Only show on mobile */
  @media only screen and (max-width: 768px) {
    .navbar-professional .mobile-menu-btn {
      display: flex !important;
      visibility: visible !important;
      align-items: center;
      justify-content: center;
      background: none;
      border: none;
      cursor: pointer;
      padding: 10px;
      width: 44px;
      height: 44px;
      position: relative;
      z-index: 1001;
      transition: all 0.3s ease;
    }

    .hamburger-line {
      display: block;
      width: 25px;
      height: 3px;
      background: #333;
      margin: 5px auto;
      transition: all 0.3s ease;
      position: relative;
    }

    .mobile-menu-btn.active .hamburger-line:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .mobile-menu-btn.active .hamburger-line:nth-child(2) {
      opacity: 0;
    }

    .mobile-menu-btn.active .hamburger-line:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -6px);
    }
  }

  /* Ensure it's hidden on desktop */
  @media only screen and (min-width: 769px) {
    .navbar-professional .mobile-menu-btn {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
      position: absolute !important;
      left: -9999px !important;
    }
  }

  @media (max-width: 768px) {
    .nav-menu-professional {
      display: none;
    }

    .cta-button-professional {
      display: none;
    }

    .mobile-menu {
      position: fixed;
      top: 120px; /* Adjust based on header height */
      left: 0;
      right: 0;
      bottom: 0;
      background: white;
      z-index: 999;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .mobile-menu.active {
      transform: translateX(0);
    }

    .mobile-menu-content {
      padding: 20px 0;
    }

    .mobile-nav-link {
      display: block;
      padding: 15px 20px;
      color: #333;
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }

    .mobile-nav-link:hover {
      background: rgba(255, 68, 56, 0.05);
      color: #ff4438;
    }

    .mobile-cta {
      display: block;
      margin: 20px;
      padding: 15px 30px;
      background: linear-gradient(135deg, #ff4438 0%, #ff6b35 100%);
      color: white;
      text-align: center;
      text-decoration: none;
      border-radius: 50px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .mobile-cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 68, 56, 0.3);
    }
  }
</style>
