---
// PackagesSection.astro - Forged SEO Packages pricing section
---

<section id="packages" class="py-20 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center max-w-3xl mx-auto">
      <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold tracking-wide bg-white shadow-sm ring-1 ring-gray-200 text-[#FF4438]">Pricing</span>
      <h2 class="mt-4 text-3xl sm:text-4xl lg:text-5xl font-extrabold text-gray-900">Forged SEO Packages</h2>
      <p class="mt-6 text-base sm:text-lg text-gray-600">
        Every package delivers the same battle-tested, full-service SEO, forged to match your business goals.
      </p>
      <p class="mt-2 text-base sm:text-lg text-gray-600">
        The difference lies in the pace: more hours mean faster execution of optimisations, content creation, technical enhancements, and overall ranking gains.
      </p>
      <p class="mt-2 text-base sm:text-lg text-gray-600">
        Each plan comes with a detailed management sheet, giving you full visibility and control over every step of the campaign.
      </p>
    </div>

    <!-- Cards -->
    <div class="mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8">
      <!-- Starter Pace -->
      <div class="relative bg-white rounded-2xl shadow-lg ring-1 ring-gray-200 overflow-hidden">
        <div class="h-1 w-full bg-gradient-to-r from-[#FF4438] via-[#FF6B35] to-[#4285F4]"></div>
        <div class="p-6">
          <h3 class="text-xl font-bold text-gray-900">Forged SEO – Starter Pace</h3>
          <p class="mt-2 text-[#FF4438] font-semibold">₱26,400/month – 16 hrs/month (4 hrs/week)</p>
          <ul class="mt-4 space-y-2 text-gray-700">
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Full-service SEO tailored to the client’s goals</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Management sheet for transparency and tracking</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span><a href="/on-page-seo-services-philippines" class="text-[#FF4438] hover:underline">On-page optimisation</a></span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span><a href="/technical-seo-services-philippines" class="text-[#FF4438] hover:underline">Technical SEO</a> fixes & improvements</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Content optimisation & <a href="/keyword-research-services" class="text-[#FF4438] hover:underline">keyword targeting</a></span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Google Business Profile optimisation</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Progress moves at a steady pace, focusing on the highest-priority actions each month</span></li>
          </ul>
          <div class="mt-6">
            <div id="paypal-starter" class="paypal-button-container"></div>
            <p class="mt-2 text-xs text-gray-500">Secure payments powered by PayPal</p>
          </div>
        </div>
      </div>

      <!-- Growth Pace -->
      <div class="relative bg-white rounded-2xl shadow-lg ring-1 ring-gray-200 overflow-hidden">
        <div class="h-1 w-full bg-gradient-to-r from-[#FF4438] via-[#FF6B35] to-[#4285F4]"></div>
        <div class="p-6">
          <h3 class="text-xl font-bold text-gray-900">Forged SEO – Growth Pace</h3>
          <p class="mt-2 text-[#FF4438] font-semibold">₱49,500/month – 30 hrs/month (7.5 hrs/week)</p>
          <ul class="mt-4 space-y-2 text-gray-700">
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Same full-service SEO as Starter</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>More hours = faster completion of optimisations, audits, and content updates</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Larger keyword sets and content expansion</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Advanced <a href="/technical-seo-services-philippines" class="text-[#FF4438] hover:underline">technical SEO</a>, structured data, and CRO recommendations implemented sooner</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Competitor analysis integrated into strategy earlier</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Quicker turnaround on optimisation tasks and new initiatives</span></li>
          </ul>
          <div class="mt-6">
            <div id="paypal-growth" class="paypal-button-container"></div>
            <p class="mt-2 text-xs text-gray-500">Secure payments powered by PayPal</p>
          </div>
        </div>
      </div>

      <!-- Fast Track -->
      <div class="relative bg-white rounded-2xl shadow-lg ring-1 ring-gray-200 overflow-hidden">
        <div class="h-1 w-full bg-gradient-to-r from-[#FF4438] via-[#FF6B35] to-[#4285F4]"></div>
        <div class="p-6">
          <h3 class="text-xl font-bold text-gray-900">Forged SEO – Fast Track</h3>
          <p class="mt-2 text-[#FF4438] font-semibold">₱82,500+/month – 50 hrs/month (12.5 hrs/week)</p>
          <ul class="mt-4 space-y-2 text-gray-700">
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Same full-service SEO scope as Growth</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Highest priority on speed and volume of delivery</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Full <a href="/seo-audit-services" class="text-[#FF4438] hover:underline">site audit</a> & fixes executed in weeks rather than months</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Larger content rollouts and <a href="/backlink-seo-services-philippines" class="text-[#FF4438] hover:underline">backlink campaigns</a> in parallel</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Rapid testing, adjustments, and scaling strategies</span></li>
            <li class="flex gap-2"><i class="fas fa-check text-green-600 mt-1"></i><span>Ideal for businesses wanting aggressive ranking gains and faster ROI</span></li>
          </ul>
          <div class="mt-6">
            <div id="paypal-fast" class="paypal-button-container"></div>
            <p class="mt-2 text-xs text-gray-500">Secure payments powered by PayPal</p>
          </div>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <div class="mt-10 text-center">
      <a href="/contact" class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-white text-[#FF4438] font-semibold shadow-md ring-1 ring-gray-200 hover:bg-gray-50 transition">
        Get Your Free Consultation
        <i class="fas fa-arrow-right"></i>
      </a>
    </div>
  </div>
</section>

<script>
  const PAYPAL_CLIENT_ID = import.meta.env.PUBLIC_PAYPAL_CLIENT_ID;
  // Fallback to provided LIVE plan IDs if env vars are not set
  const PLAN_STARTER = import.meta.env.PUBLIC_PAYPAL_PLAN_ID_STARTER || 'P-3P2511639M442461SNCPPDNQ';
  const PLAN_GROWTH = import.meta.env.PUBLIC_PAYPAL_PLAN_ID_GROWTH || 'P-0XV95953GX3131429NCPPFJA';
  const PLAN_FAST = import.meta.env.PUBLIC_PAYPAL_PLAN_ID_FAST || 'P-95B79324H9815422TNCPPF4Y';
  const SUCCESS_URL = import.meta.env.PUBLIC_PAYPAL_SUCCESS_URL || '/thanks';
  const CANCEL_URL = import.meta.env.PUBLIC_PAYPAL_CANCEL_URL || '/?payment=cancel';
  const CURRENCY = import.meta.env.PUBLIC_PAYPAL_CURRENCY || 'PHP';

  function loadPayPalSdk() {
    return new Promise((resolve, reject) => {
      if (typeof window === 'undefined') return resolve(null);
      if (window.paypal) return resolve(window.paypal);
      const existing = document.getElementById('paypal-sdk');
      if (existing) {
        existing.addEventListener('load', () => resolve(window.paypal));
        existing.addEventListener('error', reject);
        return;
      }
      if (!PAYPAL_CLIENT_ID) {
        console.warn('PayPal client ID not configured');
        return resolve(null);
      }
      const script = document.createElement('script');
      script.id = 'paypal-sdk';
      script.src = `https://www.paypal.com/sdk/js?client-id=${encodeURIComponent(PAYPAL_CLIENT_ID)}&vault=true&intent=subscription&currency=${encodeURIComponent(CURRENCY)}`;
      script.async = true;
      script.onload = () => resolve(window.paypal);
      script.onerror = reject;
      document.head.appendChild(script);
    });
  }

  function renderSubscriptionButton(selector, planId) {
    const target = document.querySelector(selector);
    if (!target) return;
    if (!planId) {
      target.innerHTML = '<span class="text-sm text-gray-500">PayPal plan not configured.</span>';
      return;
    }
    window.paypal.Buttons({
      style: { layout: 'vertical', color: 'gold', shape: 'pill', label: 'subscribe' },
      createSubscription: (data, actions) => {
        return actions.subscription.create({ plan_id: planId });
      },
      onApprove: (data, actions) => {
        const subId = data.subscriptionID || '';
        window.location.href = `${SUCCESS_URL}?subscriptionID=${encodeURIComponent(subId)}`;
      },
      onCancel: () => {
        window.location.href = CANCEL_URL;
      },
      onError: (err) => {
        console.error('PayPal error', err);
        target.innerHTML = '<span class="text-sm text-red-600">Payment initialisation failed. Please try again or contact support.</span>';
      }
    }).render(selector);
  }

  (async () => {
    try {
      const paypal = await loadPayPalSdk();
      if (!paypal) return;
      renderSubscriptionButton('#paypal-starter', PLAN_STARTER);
      renderSubscriptionButton('#paypal-growth', PLAN_GROWTH);
      renderSubscriptionButton('#paypal-fast', PLAN_FAST);
    } catch (e) {
      console.error('Failed to load PayPal SDK', e);
    }
  })();
</script>
